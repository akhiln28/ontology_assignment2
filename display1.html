<!DOCTYPE html>
<html>

<head>
    <script src="elabel.js" type="text/javascript"></script>
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>

<body>
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <script>
        function initMap() {
            var uluru = { lat: 28.34, lng: 77.12 };
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 2,
                center: uluru
            });
            map.setOptions({ styles: styles['hide'] });

            var marker = new google.maps.Marker({
                position: uluru,
                icon: 'icon.png',
                visible: true,
                optimize: false,
                label: { text: "random text" },
                map: map
            });
            var json_obj1 = JSON.parse(Get('https://api.themoviedb.org/3/tv/on_the_air?api_key=39fda37c1a2b7aca9c188eb7d67a34e1&page=1'));
            for (let index = 1; index <= json_obj1.total_pages; index++) {
                var url = 'https://api.themoviedb.org/3/tv/on_the_air?api_key=39fda37c1a2b7aca9c188eb7d67a34e1&page=' + index;
                var json_obj = JSON.parse(Get(url));
                var i = 0;
                while (i < json_obj.results.length) {
                    if (json_obj.results[i].origin_country.length == 0)  //no country data
                        document.write(i + " No country " + json_obj.results[i].original_name + " " + json_obj.results[i].origin_country[0] + " " + "</br>");
                    else  //have data
                    {
                        var latlon = { lat: getMaxLat(json_obj.results[i].origin_country[0]), lng: getMaxLon(json_obj.results[i].origin_country[0]) };
                        var marker = new google.maps.Marker({
                            position: latlon,
                            icon: 'icon.png',
                            visible: true,
                            label: { text: 'text' },
                            map: map
                        });
                    }
                    i++;
                }
            }
        }
        var styles = {
            default: null,
            hide: [
                {
                    featureType: 'all',
                    elementType: 'labels',
                    stylers: [{ visibility: 'off' }]
                },
                {
                    featureType: 'administrative.country',
                    elementType: 'labels',
                    stylers: [{ visibility: 'on' }]
                },
                {
                    featureType: 'administrative.country',
                    elementType: 'labels.text',
                    stylers: [{ lightness: '70' }]
                },

                {
                    featureType: 'transit',
                    elementType: 'labels.icon',
                    stylers: [{ visibility: 'off' }]
                }
            ]
        };
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKoqSfq36RAA8V4agXV2iP5e4Ixipd-HM&callback=initMap">
    </script>
</body>

</html>